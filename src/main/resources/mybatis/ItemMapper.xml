<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.app.mapper.ItemMapper">

	<resultMap id="itemsResult" type="Item">
		<id property="id" column="i_id" />
		<result property="name" column="i_name" />
		<result property="amount" column="amount" />
		<result property="note" column="note" />
		<result property="registered" column="registered" />
		<result property="updated" column="updated" />
		<association property="location"
			resultMap="locationResult" />
	</resultMap>

	<resultMap type="Location" id="locationResult">
		<id property="id" column="l_id" />
		<result property="name" column="l_name" />
	</resultMap>


	<!-- <resultMap type="Item" id="selectbyId"> -->
	<!-- <id property="id" column="i_id"/> -->
	<!-- <result property="amount" column="amount"/> -->
	<!-- <result property="registered" column="registered"/> -->
	<!-- <result property="updated" column="updated"/> -->
	<!-- <result property="note" column="note"/> -->
	<!-- <association property="location" resultMap="locationResult"/> -->
	<!-- </resultMap> -->

	<select id="selectAll" resultMap="itemsResult">

		select i.id as i_id ,
		i.name as
		i_name,
		i.amount,
		l.name as l_name
		from locations l
		join items i
		on
		i.location_id = l.id
		order by i.registered desc;

	</select>

	<select id="selectbyId" parameterType="Integer"
		resultMap="itemsResult">

		select i.id as i_id,
		amount,
		l.name as l_name,
		registered,
		updated,
		note,
		i.name as i_name
		from items i
		join locations l
		on
		i.location_id = l.id
		where i.id = #{id} ;
	</select>


	<insert id="insert" parameterType="Item">

		insert into
		items(name,amount,location_id,note)
		values(#{name},#{amount},#{location.id},#{note});

	</insert>

	<delete id="delete" parameterType="Integer">

		delete
		from items
		where id = #{id};

	</delete>





</mapper>